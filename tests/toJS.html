<!DOCTYPE html>
<html>
<head>

	<meta http-equiv="Content-type" content="text/html; charset=utf-8">

	<title>Acuna runnable js test</title>
<!--[if lt IE 9]>
<script src="/js_shared/html5shiv.js"></script>
<![endif]-->
	<script type="text/javascript" src="../../dojo/dojo.js" data-dojo-config="async: true"></script>
	<script type="text/javascript">
		var go,show;
		require([
			"acuna/tests/concat", "dojo/json", "dojo/dom-construct", "dojo/ready"
		], function(concat, JSON, domConstruct,ready){
			
			go = function(){
				var file = document.getElementById("file").value;
				parser.load(file,function(context){
					parser.toJS(context,function(js){;
						domConstruct.create("div",{
							innerHTML:"<pre>"+js+"</pre>"
						},document.body);
						eval(js);
						console.log(context)
					},{
						useContextData:true,
						module:false
					});
				},true);
			}
			show = function(){
				var file = document.getElementById("file").value;
				window.open(file);
			}
			
			exec = function() {
				var stack = concat([],[],{});
				console.log(stack)
			}
		});

	</script>
</head>
<body class="claro">
	<input id="file" name="file" value="test.una">
	<button onclick="go()"/>Go</button>
	<button onclick="show()"/>Show</button>
	<button onclick="exec()"/>Exec</button>
	<div id="app">Click me!</div>
	<p>
		<a href="test.una">test.una</a>
	</p>
	<h3>The JavaScript equivalent</h3>
</body>
</html>
